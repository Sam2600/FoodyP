{% extends 'base.html' %}

{% block title %}Checkout{% endblock %}

{% block content %}
<div class="max-w-4xl mt-10 mx-auto p-6 bg-white shadow rounded-lg">
   <h1 class="text-2xl font-bold mb-6">Your Cart</h1>

   {% if items %}
   <form method="post" action="{% url 'update_cart' %}">
      {% csrf_token %}
      <table class="w-full text-left mb-6">
         <thead>
         <tr class="border-b">
            <th class="py-2">Item</th>
            <th class="py-2">Price</th>
            <th class="py-2">Quantity</th>
            <th class="py-2">Total</th>
         </tr>
         </thead>
         <tbody>
         {% for item in items %}
         <tr class="border-b">
            <td class="py-4 flex items-center space-x-4">
               <img src="{{ item.image_url }}" alt="{{ item.name }}" class="w-16 h-16 object-cover rounded" />
               <div>
               <p class="font-semibold">{{ item.name }}</p>
               <p class="text-sm text-gray-500">{{ item.category }}</p>
               </div>
            </td>
            <td class="py-4">${{ item.price }}</td>
            <td class="py-4">
               <div class="flex items-center space-x-2">
               <button type="submit" name="decrease" value="{{ item.id }}" class="bg-gray-300 px-2 rounded">âˆ’</button>
               <span class="px-2">{{ item.quantity }}</span>
               <button type="submit" name="increase" value="{{ item.id }}" class="bg-gray-300 px-2 rounded">+</button>
               </div>
            </td>
            <td class="py-4">${{ item.price|floatformat:2|floatformat|add:item.quantity|floatformat }}</td>
         </tr>
         {% endfor %}
         </tbody>
      </table>
      <div class="text-right mb-4">
         <p class="text-xl font-bold">
         Total: ${{ total }}
         </p>
      </div>
      <div class="text-right">
         <button type="submit" formaction="{% url 'place_order' %}" class="bg-blue-600 text-white px-6 py-2 rounded">Checkout</button>
      </div>
   </form>
   {% else %}
   <p>Your cart is empty.</p>
   {% endif %}
</div>
{% endblock %}